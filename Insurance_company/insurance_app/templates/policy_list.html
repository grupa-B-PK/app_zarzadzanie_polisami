{% extends 'base.html' %}

{% block title %}Zakupione polisy{% endblock title %}

{% block content %}

<h3 style="text-align:center;margin-top:3rem;">Twoje polisy samochodowe:</h3>

{% if car_insurances %}
<div class="accordion accordion-flush" id="accordionFlushExample"
     style="width:60%;margin-left:auto;margin-right:auto;margin-top:6rem;margin-bottom: 4rem;">
    {% for policy in car_insurances %}
    <div class="accordion-item">
        <h2 class="accordion-header" id="heading{{forloop.counter}}">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#flush-collapse{{forloop.counter}}" aria-expanded="false"
                    aria-controls="flush-collapse{{forloop.counter}}">Polisa nr:&nbsp;<strong>
                {{ policy.policy_id }}<span style="margin-right: 4rem;"></span> dla pojazdu:
                {{ policy.car_mark_model }}</strong>
            </button>
        </h2>
        <div id="flush-collapse{{forloop.counter}}"
             class="accordion-collapse collapse"
             data-bs-parent="#accordionFlushExample">
            <div class="accordion-body">
                <p>Numer polisy: {{ policy.policy_id }}</p>
                <p>Typ polisy: {{ policy.policy_type }}</p>
                <p>Dla pojazdu: {{ policy.car_mark_model }}</p>
                <p>Aktywna do: {{ policy.valid_to }}</p>
                <button class="btn btn-info" style="margin-top: 1rem;">
                    <a href="{% url 'policy_car_detail' policy_id=policy.policy_id %}"
                       style="text-decoration:none;color:white;">Szczegóły
                        polisy</a>
                </button>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% else %}
<p class="text-danger" style="text-align:center;margin-top:2rem;">
    <strong>Brak polis samochodowych
    .</strong>
    Skorzystaj z naszych ofert, aby uzyskać ochronę dla swojego samochodu. </p>
<div style="text-align:center;margin-top: 3rem;">
    <button type="button" class="btn btn-success" style="width:20rem;">
        <a style="text-decoration:none;color:white;" href="{% url 'policy_car_create' %}">Chcę kupić polisę</a>
    </button>
</div>
{% endif %}

<!--HOUSE POLICIES-->
<h3 style="text-align:center;margin-top:3rem;">Twoje polisy dla nieruchomości:</h3>

{% if house_insurances %}
<div class="accordion accordion-flush" id="accordionFlushExample"
     style="width:60%;margin-left:auto;margin-right:auto;margin-top:6rem;margin-bottom: 4rem;">
    {% for policy in house_insurances %}
    <div class="accordion-item">
        <h2 class="accordion-header" id="heading{{forloop.counter}}house_collapse">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#flush-collapse{{forloop.counter}}house_collapse" aria-expanded="false"
                    aria-controls="flush-collapse{{forloop.counter}}house_collapse">
                Numer polisy:&nbsp;<strong>{{ policy.policy_id }}</strong>
            </button>
        </h2>
        <div id="flush-collapse{{forloop.counter}}house_collapse"
             class="accordion-collapse collapse"
             data-bs-parent="#accordionFlushExample">
            <div class="accordion-body">
                <p>Numer polisy: {{ policy.policy_id }}</p>
                <p>Typ polisy: {{ policy.policy_type }}</p>
                <p>Dla ubezpieczonej nieruchomości typu: {{ policy.house_type }}</p>
                <p>Aktywna do: {{ policy.valid_to }}</p>
                <button class="btn btn-info" style="margin-top: 1rem;">
                    <a href="{% url 'policy_house_detail' policy_id=policy.policy_id %}"
                       style="text-decoration:none;color:white;">Szczegóły
                        polisy</a>
                </button>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% else %}
<p class="text-danger" style="text-align:center;margin-top:2rem;">
    <strong>Brak polis dla nieruchomości
    .</strong>
    Skorzystaj z
    naszych ofert,
    aby uzyskać ochronę
    dla swojego domu lub
    mieszkania </p>
<div style="text-align:center;margin-top: 3rem;">
    <button type="button" class="btn btn-success" style="width:20rem;">
        <a style="text-decoration:none;color:white;" href="{% url 'policy_house_create' %}">Chcę
            kupić
            polisę</a>
    </button>
</div>
{% endif %}


<div style="text-align:center;margin-top:10rem;left:auto;right:auto;width:100%;">
    <div class="btn btn-light"><a style="text-decoration:none;" href="{% url 'main_page' %}">Powrót do strony głównej</a>
    </div>
</div>
{% endblock %}
